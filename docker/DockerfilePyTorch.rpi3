FROM racing-robot-rpi3-opencv:latest

# Pytorch Dependencies
RUN . $VENV/bin/activate && \
    pip install pyyaml setuptools cffi typing

RUN git clone --recursive https://github.com/pytorch/pytorch

RUN . $VENV/bin/activate && \
    cd pytorch && \
    MAX_JOBS=8 NO_DISTRIBUTED=1 NO_CAFFE2_OPS=1 NO_CUDA=1 python setup.py install
